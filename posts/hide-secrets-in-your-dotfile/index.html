<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="When upload your dot files repo to host, secrets in some files(maybe one or two lines) could make you feel crazy about whether or not should you make the repo public. However, there is a trick to handle the awkward situation."><title>Hide Secrets in Your Dot Files on Public Repository</title><link rel=canonical href=https://blog.animer.live/posts/hide-secrets-in-your-dotfile/><link rel=stylesheet href=/scss/style.min.8191399262444ab68b72a18c97392f5349be20a1615d77445be51e974c144cff.css><meta property="og:title" content="Hide Secrets in Your Dot Files on Public Repository"><meta property="og:description" content="When upload your dot files repo to host, secrets in some files(maybe one or two lines) could make you feel crazy about whether or not should you make the repo public. However, there is a trick to handle the awkward situation."><meta property="og:url" content="https://blog.animer.live/posts/hide-secrets-in-your-dotfile/"><meta property="og:site_name" content="MeowKing"><meta property="og:type" content="article"><meta property="article:section" content="Posts"><meta property="article:tag" content="rice"><meta property="article:tag" content="dotfile"><meta property="article:tag" content="shell"><meta property="article:published_time" content="2023-01-09T00:00:00+08:00"><meta property="article:modified_time" content="2023-01-09T00:00:00+08:00"><meta name=twitter:title content="Hide Secrets in Your Dot Files on Public Repository"><meta name=twitter:description content="When upload your dot files repo to host, secrets in some files(maybe one or two lines) could make you feel crazy about whether or not should you make the repo public. However, there is a trick to handle the awkward situation."><link rel="shortcut icon" href=favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu47f3c392fec5eb809b925e10194e2a18_47476_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ðŸ’¢</span></figure><div class=site-meta><h1 class=site-name><a href=/>MeowKing</a></h1><h2 class=site-description>A Linux enthusiast who loves anime and cats.</h2></div></header><ol class=social-menu><li><a href='https://aur.archlinux.org/packages?K=Zarkli&SeB=m' target=_blank title=AUR rel=me><!doctype html><svg t="1673232109747" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="2136" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><path d="M485.973333 25.813333c-43.264 106.112-69.376 175.573334-117.546666 278.485334 29.568 31.317333 65.834667 67.797333 124.714666 108.970666-63.317333-26.026667-106.496-52.224-138.794666-79.36C292.693333 462.592 196.053333 645.888.0 998.186667 154.112 909.184 273.578667 854.4 384.853333 833.408A282.026667 282.026667.0 01377.6 767.402667l.128-4.949334c2.474667-98.730667 53.802667-174.677333 114.645333-169.472 60.8 5.12 108.117333 89.386667 105.728 188.117334A278.186667 278.186667.0 01591.872 834.133333c110.08 21.504 228.309333 76.245333 380.330667 164.010667-29.952-55.168-56.746667-104.917333-82.304-152.32-40.234667-31.146667-82.218667-71.765333-167.808-115.754667 58.88 15.317333 100.992 32.938667 133.802666 52.650667-259.84-483.584-280.746666-547.882667-369.92-756.906667zM976.981333 911.36v-26.581333h-9.984v-3.584H990.976v3.584h-10.026667V911.36h-3.968m18.133334.0v-30.165333h6.058666l7.125334 21.333333a157.866667 157.866667.0 011.450666 4.565333c.341333-1.109333.853333-2.730667 1.621334-4.864l7.210666-21.034666H1024V911.36h-3.882667v-25.301333l-8.832 25.301333H1007.744l-8.746667-25.685333V911.36h-3.882666" fill="#cdcdcd" p-id="2137"/></svg></a></li><li><a href=https://github.com/Ziqi-Yang target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=posts/index.xml target=_blank title=Rss rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#solve-the-first-condition>Solve the First Condition</a><ol><li><a href=#encrypt-secrets>Encrypt Secrets</a><ol><li><a href=#first-get-the-secret-needed-to-be-encrypted>First, Get the secret needed to be encrypted</a></li><li><a href=#second-encrypt-the-secret-using-gpg-and-base64>Second, encrypt the secret using GPG and base64</a></li><li><a href=#third-replace-the-secret-with-the-encrypted-string-dot>Third, replace the secret with the encrypted string.</a></li><li><a href=#sidenote-decryption>Sidenote: Decryption</a></li></ol></li><li><a href=#automate-dot-files-management-workflow>Automate Dot Files Management Workflow</a></li></ol></li><li><a href=#second-condition>Second Condition</a></li><li><a href=#links>Links</a><ol><li><a href=#gpg>GPG</a></li><li><a href=#dotdrop-docs>DotDrop Docs</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/rice/>Rice</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/hide-secrets-in-your-dotfile/>Hide Secrets in Your Dot Files on Public Repository</a></h2><h3 class=article-subtitle>When upload your dot files repo to host, secrets in some files(maybe one or two lines) could make you feel crazy about whether or not should you make the repo public. However, there is a trick to handle the awkward situation.</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Jan 09, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><p>I am using <a class=link href=https://github.com/deadc0de6/dotdrop target=_blank rel=noopener>dotdrop</a> to manage my dot files. If you don&rsquo;t use it, it&rsquo;s fine, but you may need to do a some extra work to make things done. For those who manually copy and paste their dot files, I highly recommend you to try it out. It can automate your copy-paste flow, and it is highly customizable. It can save you a lot of time dealing with chores. (Nix OS users should ignore what I said)</p><p>The conditions can be divided into two:</p><ol><li>Secrets are only some small pieces of code in your dot files. For example, you write a web spider to collect your personal information on a website, but the script file contains your cookie. It can be annoying that you want to share your code and protect your privacy at the same time while using the current dot file automatic workflow. You are in an awkward position.</li><li>Secrets are individual files.</li></ol><p>The problem can be solved with <code>encryption</code> technology. We will use <code>gpg</code> to encrypt secrets. For those who haven&rsquo;t set their <code>gpg keys</code>, I recommend them to read through <a class=link href=https://wiki.archlinux.org/title/GnuPG target=_blank rel=noopener>GnuPG - ArchWiki</a>, which is comprehensive and practical.</p><h2 id=solve-the-first-condition>Solve the First Condition</h2><p>To deal with those few but annoying secrets, we can use <code>sed</code> to replace the original secrets with encrypted code. For example, we have a file whose content look like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>char * pass = &#34;notapassword&#34;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>printf(&#34;What&#39;s your name?&#34;);
</span></span><span class=line><span class=cl>printf(&#34;My name is %s.&#34;, name);
</span></span></code></pre></td></tr></table></div></div><p>We want to change the string <code>notapassword</code> in the <code>first</code> line to an encrypted string which can only be decrypted by ourselves. What should we do?</p><h3 id=encrypt-secrets>Encrypt Secrets</h3><h4 id=first-get-the-secret-needed-to-be-encrypted>First, Get the secret needed to be encrypted</h4><p>To get the secret string, we can either manually copy the content if we can ensure that it will not change in the later update or using <code>sed</code> command. Here I&rsquo;d like to briefly introduce the second option.</p><p>If your match regex is robust(deal with all input and only output a single pattern), like this regex:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>char <span class=se>\*</span> <span class=nv>pass</span> <span class=o>=</span> <span class=s2>&#34;\(.*\)&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>Then the following command will only print out the single password <code>notapassword</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sed -n <span class=s1>&#39;s/char \* pass = &#34;\(.*\)&#34;;/\1/p&#39;</span>
</span></span><span class=line><span class=cl><span class=c1># test it with:</span>
</span></span><span class=line><span class=cl><span class=c1># printf &#39;char * pass = &#34;notapassword&#34;;\n&#34;hello&#34;\n&#34;world&#34;\n&#39; | sed -n &#39;s/char \* pass = &#34;\(.*\)&#34;;/\1/p&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p>or If you want to restrict the output to a specific range, you can execute the following command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sed -n <span class=s1>&#39;1,3s/char \* pass = &#34;\(.*\)&#34;;/\1/p&#39;</span> <span class=c1># processing input is 1st to 3st lines</span>
</span></span><span class=line><span class=cl>sed -n <span class=s1>&#39;1s/char \* pass = &#34;\(.*\)&#34;;/\1/p&#39;</span> <span class=c1># processing input is the first line</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=second-encrypt-the-secret-using-gpg-and-base64>Second, encrypt the secret using GPG and base64</h4><p>Continuing with the above example, here we already have the secret string <code>notapassword</code>, we then need to encrypt it into a non-breaking string:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;notapassword&#34;</span> <span class=p>|</span> gpg -ea -r 389582ABC15D64CCFB74D82F934AE9B6B6E9FF34
</span></span></code></pre></td></tr></table></div></div><p>Note <code>389582ABC15D64CCFB74D82F934AE9B6B6E9FF34</code> is the <code>keyid</code> of the key which you want to use to encrypt the string. Toe know your <code>keyid</code>, please execute command <code>gpg --list-keys</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ gpg --list-keys
</span></span><span class=line><span class=cl>/home/zarkli/.gnupg/pubring.kbx
</span></span><span class=line><span class=cl>-------------------------------
</span></span><span class=line><span class=cl>pub   rsa3072 2023-01-06 <span class=o>[</span>SC<span class=o>]</span>
</span></span><span class=line><span class=cl>      389582ABC15D64CCFB74D82F934AE9B6B6E9FF34
</span></span><span class=line><span class=cl>uid           <span class=o>[</span>ultimate<span class=o>]</span> Ziqi Yang &lt;mr.ziqiyang@gmail.com&gt;
</span></span><span class=line><span class=cl>sub   rsa3072 2023-01-06 <span class=o>[</span>E<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><p>Since we use <code>gpg</code> to encrypt the string(actually use the public key to encrypt string), we can confirm that unless our private key has leaked out, only ourselves can decrypt the string.</p><p>Now that we have gotten the encrypted string, which should be like:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>-----BEGIN PGP MESSAGE-----
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>hQGMA/6ct2lNSe5lAQv+Ik4O4O6gBT8rVDPS/96xHYGUxeokFPKEgrl9QQiAjSTY
</span></span><span class=line><span class=cl>D9wcmbxLe9319fI05dO6oJSsam9dgjUKBt42M4PkRjHX3PwZex+O3TYmrxo3zFfg
</span></span><span class=line><span class=cl>S4RWxGp2yWJ0/7wbILj1bFLo3bg3LKkkDmPZzK5KWosb0N0G/lR+mvzzDzm6yVYw
</span></span><span class=line><span class=cl>e8oR3vs/UefPxF0LiOo9kD4vTI0MgGb6i9dcgLbg08TspeDwiAcStH8QkQFnH8N/
</span></span><span class=line><span class=cl>ZQgK1mlblccpTUTsVOuUsslgw/sXpElbBUBUS6ftOzVlqbQMJR0lWYJzl5t/sz+a
</span></span><span class=line><span class=cl>4FqkINYp55mQpdpbaTBZ32c8BQvCK6HDZLFc20rhQIg7KPraiDzboHBQIc7pWmml
</span></span><span class=line><span class=cl>6QyrkZAxyh3GORuiSPtk74JuUHfO9NbGWn8kwBhkIyR7ecd6BGQYjvsRUW3385Vb
</span></span><span class=line><span class=cl>4DZd5rf2j1cVTlx854uwkmb6KE+5bmcjUd/CYcJ1oDPLNQcPBJYZ2wdojnvCJBAV
</span></span><span class=line><span class=cl>nnfzy1kAv+eYlUYtl2qS0kgBIe0B8h/cUU2wsWf4mCukT7aBRjdJH0pWjZrkrTUX
</span></span><span class=line><span class=cl>urhaA1bQuYSERtQ5DsAxh0TGvXLp4G1y8Hg5J3d7YPSTBc+b/cynG/A=
</span></span><span class=line><span class=cl>=xiNF
</span></span><span class=line><span class=cl>-----END PGP MESSAGE-----
</span></span></code></pre></td></tr></table></div></div><p>To get one line string, we can either extract the content in the middle of the encrypted data, or use <code>base64</code> algorithm to encrypt it. I will introduce the second method.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;notapassword&#34;</span> <span class=p>|</span> gpg -ea -r 389582ABC15D64CCFB74D82F934AE9B6B6E9FF34 <span class=p>|</span> base64 -w <span class=m>0</span>
</span></span></code></pre></td></tr></table></div></div><p><code>-w 0</code> means don&rsquo;t add line wrap in the <code>base64</code> encrypted data. By default, <code>base64</code> will add a line wrap after every 76 characters.</p><h4 id=third-replace-the-secret-with-the-encrypted-string-dot>Third, replace the secret with the encrypted string.</h4><p>We can use a variable to store the previous encrypted string, and the insert the content into the original place.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sed <span class=s1>&#39;s/char \* pass = &#34;\(.*\)&#34;;/char \* pass = &#34;&#39;</span><span class=nv>$a</span><span class=s1>&#39;&#34;;/&#39;</span>
</span></span><span class=line><span class=cl><span class=c1># test it with:</span>
</span></span><span class=line><span class=cl><span class=c1># a=$(echo &#34;notapassword&#34; | gpg -ea -r 389582ABC15D64CCFB74D82F934AE9B6B6E9FF34 | base64 -w 0)</span>
</span></span><span class=line><span class=cl><span class=c1># printf &#39;char * pass = &#34;notapassword&#34;;\n&#34;hello&#34;\n&#34;world&#34;\n&#39; | sed &#39;s/char \* pass = &#34;\(.*\)&#34;;/char \* pass = &#34;&#39;$a&#39;&#34;;/&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p>Note that under bash environment, string between single quote is raw(e.g. <code>'$a'</code> means exactly <code>'$a'</code> ), and if you want to insert variables into the string, use nested single quote(e.g. <code>''$a''</code> means <code>'hello'</code> if <code>$a</code> equals to <code>'hello'</code>).</p><h4 id=sidenote-decryption>Sidenote: Decryption</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;notapassword&#34;</span> <span class=p>|</span> gpg -ea -r 389582ABC15D64CCFB74D82F934AE9B6B6E9FF34 <span class=p>|</span> base64 -w <span class=m>0</span> <span class=p>|</span> base64 -d <span class=p>|</span> gpg -d
</span></span></code></pre></td></tr></table></div></div><h3 id=automate-dot-files-management-workflow>Automate Dot Files Management Workflow</h3><p>Please refer to <a class=link href=https://dotdrop.readthedocs.io/en/latest/howto/sensitive-dotfiles/ target=_blank rel=noopener>Handle secrets</a> and <a class=link href=https://dotdrop.readthedocs.io/en/latest/config/config-transformations/ target=_blank rel=noopener>Transformations entry</a> sections of <code>dotdrop</code>.</p><blockquote><p>Side Note: For write transformations, {0} and {1} in the &rsquo;transformations entry&rsquo; section means the source file path and the temporary file path. The temporary file will be firstly copied from source file, and then you can modify it in the script. Afterward dotdrop will import it into your repo.</p></blockquote><h2 id=second-condition>Second Condition</h2><p>I have no energy to write more (<code>____</code>). Please refer to the first condition.</p><h2 id=links>Links</h2><h3 id=gpg>GPG</h3><ol><li><a class=link href=https://wiki.archlinux.org/title/GnuPG target=_blank rel=noopener>GnuPG - ArchWiki</a></li><li><a class=link href=https://disjoint.ca/til/2017/09/23/gpg-encrypting-a-string-into-another-single-line-string/ target=_blank rel=noopener>GPG encrypting a string into another single-line string</a></li></ol><h3 id=dotdrop-docs>DotDrop Docs</h3><ol><li><a class=link href=https://dotdrop.readthedocs.io/en/latest/howto/sensitive-dotfiles/ target=_blank rel=noopener>Handle secrets</a></li><li><a class=link href=https://dotdrop.readthedocs.io/en/latest/config/config-transformations/ target=_blank rel=noopener>Transformations entry</a></li></ol></section><footer class=article-footer><section class=article-tags><a href=/tags/rice/>rice</a>
<a href=/tags/dotfile/>dotfile</a>
<a href=/tags/shell/>shell</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/posts/switch_to_wayland/><div class=article-details><h2 class=article-title>Switch to Wayland</h2></div></a></article></div></div></aside><div id=gitalk-container></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css><script src=https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/blueimp-md5@2.18.0/js/md5.min.js></script>
<script>const gitalk=new Gitalk({clientID:"a93c2dcbf381261b9c79",clientSecret:"e2396961639739ad1e1c3844d03d0b2372073c0b",repo:"blog",owner:"Ziqi-Yang",admin:["Ziqi-Yang"],distractionFreeMode:!1,id:md5(location.pathname)});(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("gitalk-container").innerHTML="Gitalk comments not available by default when the website is previewed locally.";return}gitalk.render("gitalk-container")})()</script><footer class=site-footer><section class=copyright>&copy;
2022 -
2023 MeowKing</section><section class=powerby>Hacking to the Gate!<br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>